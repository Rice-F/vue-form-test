{"remainingRequest":"/Users/sunjing/Documents/test/vue-test/vue-form-test/node_modules/_vue-loader@15.9.0@vue-loader/lib/index.js??vue-loader-options!/Users/sunjing/Documents/test/vue-test/vue-form-test/src/components/FormItem.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/sunjing/Documents/test/vue-test/vue-form-test/src/components/FormItem.vue","mtime":1583398764000},{"path":"/Users/sunjing/Documents/test/vue-test/vue-form-test/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/sunjing/Documents/test/vue-test/vue-form-test/node_modules/_babel-loader@8.0.6@babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/sunjing/Documents/test/vue-test/vue-form-test/node_modules/_cache-loader@4.1.0@cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/sunjing/Documents/test/vue-test/vue-form-test/node_modules/_vue-loader@15.9.0@vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBTY2hlbWEgZnJvbSAnYXN5bmMtdmFsaWRhdG9yJwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogJ2Zvcm0taXRlbScsCiAgaW5qZWN0OiBbJ0VGb3JtJ10sCiAgcHJvcHM6IFsnbGFiZWwnLCAncHJvcCddLAogIGRhdGEgKCkgewogICAgcmV0dXJuIHsKICAgICAgZXJyTXNnOiAnJywKICAgICAgZXJyU3RhdHVzOiBmYWxzZQogICAgfQogIH0sCiAgbW91bnRlZCAoKSB7CiAgICB0aGlzLiRvbigndmFsaWRhdGUnLCB0aGlzLnZhbGlkYXRvcikKICB9LAogIG1ldGhvZHM6IHsKICAgIC8vIOmqjOivgeinhOWImQogICAgdmFsaWRhdG9yICgpIHsKICAgICAgLy8gY29uc29sZS5sb2codGhpcykKICAgICAgY29uc3QgcnVsZXMgPSB0aGlzLkVGb3JtLnJ1bGVzW3RoaXMucHJvcF0KICAgICAgY29uc3QgdmFsdWUgPSB0aGlzLkVGb3JtLm1vZGVsW3RoaXMucHJvcF0KICAgICAgLy8g6aqM6K+B55qE5o+P6L+w5a+56LGhIOmqjOivgeinhOWImQogICAgICBjb25zdCBkZXNjcmlwdG9yID0geyBbdGhpcy5wcm9wXTogcnVsZXMgfQogICAgICBjb25zdCBzY2hlbWEgPSBuZXcgU2NoZW1hKGRlc2NyaXB0b3IpCiAgICAgIHNjaGVtYS52YWxpZGF0ZSh7IFt0aGlzLnByb3BdOiB2YWx1ZSB9LCBlcnJvcnMgPT4gewogICAgICAgIGlmIChlcnJvcnMpIHsKICAgICAgICAgIHRoaXMuZXJyTXNnID0gZXJyb3JzWzBdLm1lc3NhZ2UKICAgICAgICAgIHRoaXMuZXJyU3RhdHVzID0gdHJ1ZQogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLmVyck1zZyA9ICcnCiAgICAgICAgICB0aGlzLmVyclN0YXR1cyA9IGZhbHNlCiAgICAgICAgfQogICAgICB9KQogICAgfQogIH0KfQo="},{"version":3,"sources":["FormItem.vue"],"names":[],"mappings":";;;;;;;;;;;AAWA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"FormItem.vue","sourceRoot":"src/components","sourcesContent":["<template>\n  <div id=\"form-item\">\n    <label for=\"\">{{label}}</label>\n    <div>\n      <slot></slot>\n      <p v-if=\"errStatus\">{{errMsg}}</p>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Schema from 'async-validator'\nexport default {\n  name: 'form-item',\n  inject: ['EForm'],\n  props: ['label', 'prop'],\n  data () {\n    return {\n      errMsg: '',\n      errStatus: false\n    }\n  },\n  mounted () {\n    this.$on('validate', this.validator)\n  },\n  methods: {\n    // 验证规则\n    validator () {\n      // console.log(this)\n      const rules = this.EForm.rules[this.prop]\n      const value = this.EForm.model[this.prop]\n      // 验证的描述对象 验证规则\n      const descriptor = { [this.prop]: rules }\n      const schema = new Schema(descriptor)\n      schema.validate({ [this.prop]: value }, errors => {\n        if (errors) {\n          this.errMsg = errors[0].message\n          this.errStatus = true\n        } else {\n          this.errMsg = ''\n          this.errStatus = false\n        }\n      })\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\" scoped>\n#form-item {\n\n}\n</style>\n"]}]}